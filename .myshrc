# vim: set ft=sh:

## ALIASES ##
# common
alias cdt='cd $TMPDIR'
alias chkconn='ping 8.8.8.8'
alias dush=' du -sh'
alias leaky='valgrind --leak-check=full --track-origins=yes'
alias ll=' ls -lh'
alias makit='make 2>&1 | tee grep_op'
alias pore='vi -X -c "cf grep_op" -c "copen"'
alias rdesk='rdesktop -g 1366x730'
alias ssc="ssh -Y sananthakrishnan@chief-sh101"
alias ssd="ssh -Y sananthakrishnan@chief-cs162"
alias sse="ssh -Y sananth5@remote.eos.ncsu.edu"
alias sst="ssh -Y sananthakrishnan@tuff"
alias sstr="ssr tuff"
alias ta='tmux att -d -t '
alias tl='tmux list-sessions'
alias tn='tmux new -s'
alias vi='vim -X'

# session specific
if [[ $SESSION == 'HOME' ]]; then
    alias cdf='cd $SYSDUMP/fortnights'
    alias cdm='cd $MONK'
    alias cds='mkcd $SYSDUMP/$(date +%0y)/$(date +%0m)/'
    alias cdsk='cd $SYSDUMP/knowledge'
    alias cdsm='cd $SYSDUMP/music'
    alias cdsr='cd $SYSDUMP/riverbed'
    alias ssa="ssh -Y sananthakrishnan@arch-sananth"
    alias ssar="ssh -Y sananth5@arc.csc.ncsu.edu"
    alias vid='cds; vi $(date +%0d).md'
    alias vidm='cdsm; vi log.md'
else
    alias aroma="aroma.py -vqa"
    alias cdw='cd $WRK'
    alias cds='cd $SECTP'
    alias cdb="cd $WRK/builds"
    alias exportpip="export PIP_INDEX_URL=http://glassjaw.lab.nbttech.com:8080/simple"
    alias lj="source ~/.virtualenvs/lumberjack/bin/activate; exportpip"
    alias lj6="source ~/.virtualenvs/lj0.6/bin/activate; exportpip"
    alias lj7="source ~/.virtualenvs/lj0.7/bin/activate; exportpip"
    alias lj1="source ~/.virtualenvs/lj1/bin/activate; exportpip"
    alias lj12="source /work/aparanjpe/workspace/ljcode/ljenv1.2/bin/activate; exportpip"
    alias lj13="source /work/aparanjpe/workspace/ljcode/ljenv1.3/bin/activate; exportpip"
    alias lj136="source ~/.virtualenvs/lj1.3.6/bin/activate; exportpip"
    alias svn-changed='svn status | grep "^M\|^D\|^A"'
    alias svn-up='svn up --ignore-externals'
fi

# os specific
if [[ $OS == 'MAC' ]]; then
	alias ls=' ls -GFh'
    alias amount="sudo hdiutil attach ~/code/android.dmg.sparseimage -mountpoint /Volumes/android"
    alias cmount="sudo hdiutil attach ~/code/code.dmg.sparseimage -mountpoint /Volumes/code"
    alias cdc='cd $CODE'
    alias cdh='cd $HACKER'
    alias cdg='cd $GOPATH'
    alias wmount="sudo mount -t nfs chief-sh101:/work/sananthakrishnan ~/work"
    alias wumount="sudo umount -f ~/work"
else
	alias ls=' ls -F --color'
fi

# session and os specific

## FUNCTIONS ##
# common
mkcd()
{
    if [[ ! -d $1 ]]; then
        mkdir -p $1
    fi

    cd $1
}

insgen()
{
    if [[ -z $1 ]]; then
        echo $0 [box]
        return
    fi

    rm -rf $WRK/ljtmp; mkdir -p $WRK/ljtmp; pip install --no-deps --target $WRK/ljtmp .; rsync -e ssh -vltrSzD $WRK/ljtmp/ root@$1:/usr/lib/python2.7/site-packages
}

xrpm()
{
    rpm2cpio $1 | cpio -idmv
}

# source unshared rc
[[ -f ~/.myshrc_unshared ]] && source ~/.myshrc_unshared

# source work rc
[[ -f ~/.myshrc_work ]] && source ~/.myshrc_work

# this is hacky, but oh-my-zsh sets LSCOLORS to a funky stupid color on Mac,
# restore it back here
if [[ $OS == 'MAC' ]]; then
    export LSCOLORS=exfxcxdxbxegedabagacad
fi

echo 'Howdy Srinath'
